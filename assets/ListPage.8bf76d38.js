import{d as D,u as se,c as N,r as X,o as i,a as B,w as z,b as C,e as d,t as S,f as y,g as m,h as x,F as L,n as I,p as G,i as U,_ as E,j as H,k as $,l as oe,m as ne,q as R,s as le,v as V,x as ue,y as re,z as ie,A as ce}from"./index.ea301f79.js";import{_ as de,c as O,I as pe,u as me,a as ve,b as ge}from"./fetchGenerations.99aeca45.js";const K=e=>(G("data-v-9cc12db0"),e=e(),U(),e),he={class:"pokemon-name"},ke={class:"pokemon-types"},fe={class:"hidden pokemon-data"},ye={class:"pokemon-data-info"},_e=K(()=>d("h3",null,"Altura",-1)),Pe={class:"pokemon-data-info right"},$e=K(()=>d("h3",null,"Peso",-1)),Se={key:1,class:"card type-normal","data-number":"#???"},we=K(()=>d("div",{class:"pokemon-image"},[d("img",{loading:"lazy",src:"https://play.pokemonshowdown.com/sprites/ani/substitute.gif",alt:"Sprite de un sustituto"})],-1)),be=K(()=>d("h2",{class:"pokemon-name"}," Cargando... ",-1)),Ce=[we,be],Ne=D({__name:"PokemonCard",props:{pokemon:null},setup(e){const g=e;se(o=>({"106efc9b":y(t)}));const t=N(()=>{var n,v;if(!((v=(n=g.pokemon)==null?void 0:n.types)!=null&&v.length))return"";const o=g.pokemon.types.map(h=>`var(--color-type-${h.type.name}-diff)`);return o.length>1?`linear-gradient(135deg, ${o[0]} 0%, ${o[0]} 60%, ${o[1]} 60%, ${o[1]} 100%)`:o});return(o,n)=>{var h,l,p;const v=X("RouterLink");return e.pokemon&&((h=e.pokemon)==null?void 0:h.id)?(i(),B(v,{key:0,to:e.pokemon.name,class:I(["card","type-"+((l=e.pokemon)==null?void 0:l.types[0].type.name)]),"data-number":"#"+String((p=e.pokemon)==null?void 0:p.id).padStart(3,"0")},{default:z(()=>{var _;return[C(de,{class:"pokemon-image",pokemon:e.pokemon},null,8,["pokemon"]),d("h2",he,S(y(O)((_=e.pokemon.species)==null?void 0:_.name)),1),d("div",ke,[(i(!0),m(L,null,x(e.pokemon.types,(u,a)=>(i(),B(pe,{key:a,"pokemon-type":u.type.name,class:"pokemon-type"},null,8,["pokemon-type"]))),128))]),d("div",fe,[d("div",ye,[_e,d("span",null,S((e.pokemon.height/10).toFixed(1))+"m",1)]),d("div",Pe,[$e,d("span",null,S((e.pokemon.weight/10).toFixed(1))+"kg",1)])])]}),_:1},8,["to","class","data-number"])):(i(),m("section",Se,Ce))}}});const T=E(Ne,[["__scopeId","data-v-9cc12db0"]]);function xe(e,g){let t;return(...o)=>{clearTimeout(t),t=setTimeout(()=>{e(...o)},g)}}const Le=H(" \u2039 "),Ie={key:1},Fe=H(" \u203A "),qe=D({__name:"PageNavigation",props:{page:null,totalPages:null},emits:["changePage"],setup(e,{emit:g}){const t=e,o=l=>[...Array.from(Array(l+1).keys()).slice(-l)],n=l=>[...Array.from(Array(t.totalPages+1).keys()).slice(-l)],v=N(()=>{const l=[];if(t.totalPages<=9)return o(t.totalPages);for(const u of[1,2])t.totalPages>=u&&l.push(u);!(t.page<3)&&!l.includes(t.page-2)&&l.push(0),l.includes(t.page-1)||l.push(t.page-1),l.includes(t.page)||l.push(t.page),l.includes(t.page+1)||l.push(t.page+1),!(t.page>t.totalPages-4)&&!l.includes(t.page+2)&&l.push(0);for(const u of[t.totalPages-1,t.totalPages])l.includes(u)||l.push(u);if(l.length<9&&t.totalPages>9){if(t.page<4||t.page>t.totalPages-3)return[...o(4),0,...n(4)];if(t.page===4)return[...o(5),0,...n(3)];if(t.page===t.totalPages-4)return[...o(2),0,...n(6)];if(t.page<=t.totalPages-3)return[...o(3),0,...n(5)]}return l});function h(l){g("changePage",l)}return(l,p)=>{const _=X("RouterLink");return i(),m("nav",null,[C(_,{class:I(["page-changer",{disabled:e.page<=1}]),to:{query:e.page>1?{page:e.page-1}:void 0},onClick:p[0]||(p[0]=u=>h("prev"))},{default:z(()=>[Le]),_:1},8,["class","to"]),d("ul",null,[(i(!0),m(L,null,x(y(v),(u,a)=>{var s,P;return i(),m("li",{key:a,class:I({active:u===+(((P=(s=l.$route)==null?void 0:s.query)==null?void 0:P.page)||1)})},[u!==0?(i(),B(_,{key:0,to:{query:{page:u}},onClick:F=>h(u)},{default:z(()=>[H(S(u),1)]),_:2},1032,["to","onClick"])):(i(),m("span",Ie,"..."))],2)}),128))]),C(_,{class:I(["page-changer",{disabled:e.page>=e.totalPages}]),to:{query:{page:e.page+1}},onClick:p[1]||(p[1]=u=>h("next"))},{default:z(()=>[Fe]),_:1},8,["class","to"])])}}});const W=E(qe,[["__scopeId","data-v-aacf85e8"]]);const Qe={},Ae=e=>(G("data-v-43850c44"),e=e(),U(),e),Me={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 122.88",fill:"currentColor"},Oe=Ae(()=>d("path",{d:"M61.44,0A61.46,61.46,0,1,1,18,18,61.25,61.25,0,0,1,61.44,0ZM78.06,38.29l6.53,6.53a4,4,0,0,1,0,5.63l-11,11,11,11a4,4,0,0,1,0,5.63l-6.53,6.53a4,4,0,0,1-5.63,0l-11-11-11,11a4,4,0,0,1-5.63,0l-6.53-6.53a4,4,0,0,1,0-5.63l11-11-11-11a4,4,0,0,1,0-5.63l6.53-6.53a4,4,0,0,1,5.63,0l11,11,11-11a4,4,0,0,1,5.63,0Z"},null,-1)),Be=[Oe];function Ee(e,g){return i(),m("svg",Me,Be)}const Re=E(Qe,[["render",Ee],["__scopeId","data-v-43850c44"]]),Ve=e=>(G("data-v-0efc994c"),e=e(),U(),e),ze=["value"],De={key:1,class:"search-suggestions"},Ge=["onMouseover","onClick"],Ue={key:1,class:"empty-list"},Ke=Ve(()=>d("i",null,"No hay Pok\xE9mon con esa b\xFAsqueda",-1)),Ze=[Ke],je=D({__name:"PokemonSearch",props:{searchQuery:null,pokemonNamesSearched:null,pokemonList:null},emits:["update:searchQuery","search","clearSearch"],setup(e,{emit:g}){const t=e,o=$(!1),n=$(-1),v=$();oe(()=>{window.addEventListener("mousedown",u=>{var s;const a=u.target;(s=v.value)!=null&&s.contains(a)||(o.value=!1)})}),ne(()=>window.removeEventListener("mousedown",()=>{}));function h(){n.value--,n.value<-1&&(n.value=t.pokemonNamesSearched.length-1)}function l(){n.value++,n.value>=t.pokemonNamesSearched.length&&(n.value=-1)}function p(u){var s,P;const a=u?O(((s=t.pokemonNamesSearched[u])==null?void 0:s.name)||""):O(((P=t.pokemonNamesSearched[n.value])==null?void 0:P.name)||"");g("update:searchQuery",a||t.searchQuery),n.value=0,o.value=!1,g("search")}function _(){o.value=!1,n.value=-1,g("update:searchQuery",""),g("clearSearch")}return(u,a)=>(i(),m("form",{ref_key:"searchForm",ref:v,onSubmit:a[6]||(a[6]=le(s=>u.$emit("search"),["prevent"])),onKeyup:[a[7]||(a[7]=V(s=>l(),["down"])),a[8]||(a[8]=V(s=>h(),["up"])),a[9]||(a[9]=V(s=>p(),["enter"])),a[10]||(a[10]=V(s=>o.value=!1,["esc"]))],onBlur:a[11]||(a[11]=s=>o.value=!1)},[d("input",{value:e.searchQuery,type:"text",placeholder:"Buscar Pok\xE9mon por nombre o n\xFAmero",onClick:a[0]||(a[0]=s=>o.value=!0),onInput:a[1]||(a[1]=s=>u.$emit("update:searchQuery",(s==null?void 0:s.target)&&s.target.value)),onFocus:a[2]||(a[2]=s=>o.value=!0)},null,40,ze),e.searchQuery?(i(),m("button",{key:0,type:"reset",onClick:a[3]||(a[3]=s=>_())},[C(Re,{class:"icon"})])):R("",!0),o.value?(i(),m("ul",De,[e.searchQuery?(i(),m("li",{key:0,class:I({active:n.value===-1}),onMouseover:a[4]||(a[4]=s=>n.value=-1),onClick:a[5]||(a[5]=s=>p())},[d("i",null,S(e.searchQuery),1)],34)):R("",!0),(i(!0),m(L,null,x(e.pokemonNamesSearched,(s,P)=>{var F;return i(),m("li",{key:P,class:I({active:((F=e.pokemonNamesSearched[n.value])==null?void 0:F.id)===s.id}),onMouseover:w=>n.value=P,onClick:w=>p(P)}," #"+S(String(s.id).padStart(3,"0"))+" - "+S(y(O)(s.name)),43,Ge)}),128)),e.pokemonNamesSearched.length===0?(i(),m("li",Ue,Ze)):R("",!0)])):R("",!0)],544))}});const He=E(je,[["__scopeId","data-v-0efc994c"]]),Y=e=>(G("data-v-a086b807"),e=e(),U(),e),Je=Y(()=>d("h1",null,"Pok\xE9dev",-1)),Te={class:"filters"},We=Y(()=>d("option",{selected:"",value:void 0}," Todas las generaciones ",-1)),Xe=["value"],Ye={class:"pokemon-list"},et=D({__name:"ListPage",setup(e){var J;const g=ie(),t=Number((J=g==null?void 0:g.query)==null?void 0:J.page)||1,o=$(t),n=$(50),v=$(o.value*n.value),h=N(()=>Math.ceil(Z.value.length/n.value)),l=$(!1),p=$([]),_=$([]),u=N(()=>Z.value.slice(v.value,v.value+n.value)),a=ce(),s=xe(P,500);function P(f){typeof f=="number"?(f<=1?(f=1,a.push({})):f>=h.value&&(f=h.value,a.push({query:{page:h.value}})),v.value=(f-1)*n.value,o.value=f):(v.value+=f==="next"?n.value:-n.value,o.value=Math.ceil(v.value/n.value)+1,o.value<=1&&(o.value=1,a.push({}))),p.value=[],u.value.forEach(({name:c})=>{p.value.push({});const r=p.value.length-1;ge(c).then(({pokemon:k})=>{var b,Q;if(k.value){const A=((b=k.value)==null?void 0:b.id)>v.value&&((Q=k.value)==null?void 0:Q.id)<=v.value+n.value;(A||!A&&F.value)&&(p.value[r]=k.value,p.value.sort((M,j)=>M.id<0?1:M.id-j.id))}})})}const F=N(()=>w.value||q.value),w=$(""),q=$(),{generations:ee}=me(),Z=N(()=>_.value.filter(({name:f,id:c})=>{var b,Q,A,M;const r=w.value?f.toLowerCase().includes((b=w.value)==null?void 0:b.toLowerCase())||c===Number(w.value):!0,k=q.value?(M=(A=(Q=q.value)==null?void 0:Q.pokemon_species)==null?void 0:A.map(({name:j})=>j))==null?void 0:M.includes(f):!0;return r&&k})),te=1e4;async function ae(){const{data:f}=await ve("pokemon?limit=-1");_.value=f.value.results.filter(({url:c})=>{var k;return Number((k=c.match(/\/(\d+)\/$/))==null?void 0:k[1])<te}).map(({name:c,url:r})=>{var b;const k=Number((b=r.match(/\/(\d+)\/$/))==null?void 0:b[1]);return{name:c,id:k}}),s()}return ae(),(f,c)=>(i(),m("main",null,[Je,d("aside",Te,[ue(d("select",{"onUpdate:modelValue":c[0]||(c[0]=r=>q.value=r),onChange:c[1]||(c[1]=r=>y(s)(1))},[We,(i(!0),m(L,null,x(y(ee),(r,k)=>(i(),m("option",{key:k,value:r},S(y(O)(r.main_region.name))+" ("+S(r.pokemon_species.length)+") ",9,Xe))),128))],544),[[re,q.value]]),C(He,{"search-query":w.value,"onUpdate:search-query":c[2]||(c[2]=r=>w.value=r),"pokemon-list":_.value,"pokemon-names-searched":y(Z),class:"search",onSearch:c[3]||(c[3]=r=>y(s)(1)),onClearSearch:c[4]||(c[4]=r=>y(s)(1))},null,8,["search-query","pokemon-list","pokemon-names-searched"])]),C(W,{class:"navigation","reduced-version":"",page:o.value,"total-pages":y(h),onChangePage:c[5]||(c[5]=r=>y(s)(r))},null,8,["page","total-pages"]),d("div",Ye,[!l.value&&p.value.length?(i(!0),m(L,{key:0},x(p.value,(r,k)=>(i(),B(T,{key:k,pokemon:r},null,8,["pokemon"]))),128)):(i(!0),m(L,{key:1},x(n.value,r=>(i(),B(T,{key:r}))),128))]),C(W,{class:"navigation",page:o.value,"total-pages":y(h),onChangePage:c[6]||(c[6]=r=>y(s)(r))},null,8,["page","total-pages"])]))}});const st=E(et,[["__scopeId","data-v-a086b807"]]);export{st as default};
